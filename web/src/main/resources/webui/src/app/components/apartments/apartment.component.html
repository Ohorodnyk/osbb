<toaster-container></toaster-container>
<div class="content">
  <breadcrumb [header]="title"></breadcrumb>
  <div class="pull-right">
    <button type="button" class="btn btn-success btn-foot" (click)="openCreateModal()">
          {{'Create Apartment'| capitalize}}
    </button>


  </div>
  <section>
    <table class="table">
      <tr>
        <th>Street</th>
        <th>City</th>
        <th>Number</th>
        <th>Square</th>
        <th>Options</th>

        <tr *ngFor="let item of resData">
          <td>{{item.house.street.name}}</td>
          <td>{{item.house.street.city.name}}</td>
          <td>{{item.number}}</td>
          <td>{{item.square}}</td>
          <td><input type="button" class="btn" value="Go to" (click)="onNavigate(item.apartmentId)"></td>

        </tr>
    </table>
  </section>

</div>

<div bsModal #createModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="createModal.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title"> {{ 'create' | capitalize }}
        </h4>
      </div>
      <form (ngSubmit)="onSubmitUserApartment()" #registerForm="ngForm">
        <div class="modal-body">
          <div>
            <div class="form-group">
              <label>{{ 'choose_house' | translate | myCapitalize}}</label>
              <select [ngModel]="house" (ngModelChange)="onChangeHouse($event)" name="sel3">
                <option [ngValue]="i" *ngFor="let i of houseList">{{i.numberHouse}}, вул. {{i.street.name}}</option>
             </select>
            </div>
            <div class="form-group">
              <label for="appart_num">
                {{ 'Apartment number' | capitalize }}
              </label>
              <input [(ngModel)]="userApartment.apartment.number" type="number" class="form-control" id="appart_num" required name="appart_num"
                min="1" step="1">
            </div>
            <div class="form-group">
              <label for="square">
                {{ 'Apartment square' | capitalize }}
              </label>
              <input [(ngModel)]="userApartment.apartment.square" type="number" class="form-control" id="square" required name="square"
                min="10">
            </div>
            <div class="form-group">
              <label for="firstname">
                {{ 'User firstname' | capitalize }}
              </label>
              <input [(ngModel)]="userApartment.userRegitrationByAdminDTO.firstName" type="text" class="form-control" id="firstname" required
                name="firstname">
                <div *ngIf='!userApartment.userRegitrationByAdminDTO.firstName' class="alert alert-danger" disabled=true>error</div>
            </div>
            <div class="form-group">
              <label for="lastname">
                {{ 'User lastname' | capitalize }}
              </label>
              <input [(ngModel)]="userApartment.userRegitrationByAdminDTO.lastName" type="text" class="form-control" id="lastname" required
                name="lastname">
            </div>
            <div class="form-group">
              <label for="email">
                {{ 'User email' | capitalize }}
              </label>
              <input [(ngModel)]="userApartment.userRegitrationByAdminDTO.email" (blur)="isValidMailFormat()" type="email" class="form-control"
                id="email" required name="email">
            </div>
            <div class="form-group">
              <label for="phone">
                {{ 'User phone' | capitalize }}
              </label>
              <input [textMask]="{mask:phoneMask}" [(ngModel)]="userApartment.userRegitrationByAdminDTO.phoneNumber" type="text" class="form-control"
                id="phone" required name="phone">
            </div>
            <div class="form-group">
              <label>{{ 'select_ownership' | translate | myCapitalize}}</label>
              <select [(ngModel)]="userApartment.userRegitrationByAdminDTO.ownership" name="selOwnership">
                <option>OWNER</option>
                <option>SUBOWNER</option>
                <option>RENTER</option>
             </select>
            </div>

            <div *ngIf="emailIsValid ">
              <div>
                <input type="file" ng2FileSelect [uploader]="uploader" (click)="initUploader(userApartment.userRegitrationByAdminDTO.email)"
                />
              </div>
              <div *ngIf="uploader">
                <table class="table table-font">
                  <thead>
                    <tr>
                      <th width="40%">{{ 'name' | translate | myCapitalize }}</th>
                      <th width="15%">{{ 'size' | translate | myCapitalize }}</th>
                      <th width="5%">{{ 'status' | translate | myCapitalize }}</th>
                      <th width="40%">{{ 'actions' | translate | myCapitalize }}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of uploader.queue">
                      <td width="40%"><strong>{{ item?.file?.name }}</strong></td>
                      <td *ngIf="uploader.isHTML5" width="15%" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                      <td *ngIf="!uploader.isHTML5" width="15%" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                      <td width="5%" class="text-center">
                        <span *ngIf="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                        <span *ngIf="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                        <span *ngIf="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                      </td>
                      <td width="40%" nowrap>
                        <button type="button" class="btn btn-danger btn-xs" (click)="item.remove()">
                        {{ 'remove' | translate | myCapitalize }}
                      </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button [disabled]="false" type="submit" class="btn btn-default">
            {{ 'save' | capitalize }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>